!function(i){var t=function(t,s){this.slider=i(t),this.defaults={displayedSlides:4,slidesMargin:20,createNavigation:!0,navigationType:"both",displayDotsNumber:!0,autoCenterActiveSlide:!0,swipe:!0,autoplay:!1,autoplayDelay:3e3,changeSlideLoop:!0,animationSpeed:300,beforeClone:i.noop,afterClone:i.noop,beforeChangeSlide:i.noop,afterChangeSlide:i.noop,beforeUpdateLayout:i.noop,afterUpdateLayout:i.noop,labels:{navigationPrev:"Précédent",navigationNext:"Suivant",navigationDot:"Afficher la diapositive ",navigationDotActive:"Diapositive présentement affichée",autoplayButton:"Mettre le carrousel en marche",autoplayButtonPause:"Mettre le carrousel en pause"},classes:{sliderOverflow:"slider-overflow",sliderWrapper:"slider-wrapper",sliderContainer:"slider-container",slide:"slide",sliderActiveContent:"slider-activecontent",sliderTrigger:"slide-trigger",sliderTriggerContent:"slide-trigger-content",sliderNavigation:"slider-navigation",navigationPrev:"slider-navigation-prev",navigationNext:"slider-navigation-next",navigationArrow:"slider-navigation-arrows",navigationDot:"slider-navigation-dots",ariaText:"aria-text",ariaTextActive:"aria-text-active",ariaHiddenBox:"aria-hidden-box",autoplayButton:"slider-autoplay",states:{active:"is-active"}}},this.classes=i.extend(!0,this.defaults.classes,window.project?window.project.classes:{}),this.labels=i.extend(!0,this.defaults.labels,window.project?window.project.labels:{}),this.config=i.extend(!0,this.defaults,s||{}),this.sliderWrapper=this.slider.find("."+this.classes.sliderWrapper),this.sliderContainer=this.slider.find("."+this.classes.sliderContainer),this.slides=this.slider.find("."+this.classes.slide),this.activeSlideIndex=0,this.displayedSlides=this.config.displayedSlides,this.mouseHover=!1,this.animated=!1,this.bindEvents(),this.slides.length>this.config.displayedSlides&&(this.config.createNavigation&&this.createNavigation(this.config.navigationType),this.config.autoplay&&this.autoplay(),this.config.swipe&&this.swipe()),this.init()};i.extend(t.prototype,{init:function(){if(this.initLayout(this.config.displayedSlides),this.createAriabox(),this.isActiveContent()){var i=this.slides.first().find("."+this.classes.sliderTriggerContent).clone();this.slider.prepend('<div class="'+this.classes.sliderContent+'"></div>'),this.updateActiveSlideContent(i),this.config.autoCenterActiveSlide===!0&&this.slider.find("."+this.classes.sliderActiveContent).css("text-align","center")}},initLayout:function(){var i=100/this.slides.length,t=this.config.slidesMargin/this.slides.length*this.slides.length,s="float: left;position: relative;width: "+i+"%;width: calc("+i+"% - "+t+"px);";this.config.beforeUpdateLayout(),this.sliderWrapper.css({position:"relative",overflow:"hidden","margin-left":this.config.slidesMargin/2*-1+"px","margin-right":this.config.slidesMargin/2*-1+"px"}),this.sliderWrapper.wrap('<div class="'+this.classes.sliderOverflow+'"></div>'),this.slider.find("."+this.classes.sliderOverflow).css("overflow","hidden"),this.sliderContainer.css({position:"relative",left:"0",width:this.slides.length/this.displayedSlides*100+"%"}),this.slides.attr("style",s).find("> a").css("display","block"),this.slides.css({"margin-left":this.config.slidesMargin/2+"px","margin-right":this.config.slidesMargin/2+"px"}),this.slides.slice(this.displayedSlides).find(":focusable").attr("tabindex","-1"),this.config.afterUpdateLayout()},bindEvents:function(){this.slider.hover(i.proxy(function(){this.mouseHover=!0},this),i.proxy(function(){this.mouseHover=!1},this)),this.isActiveContent()&&this.slider.find("."+this.classes.sliderTrigger).on("click",i.proxy(function(t){var s=i(t.currentTarget).parents("."+this.classes.slide).find("."+this.classes.sliderTriggerContent).clone();this.updateActiveSlideContent(s),t.prevent()},this)),i(document).on("keyboardnavigation",i.proxy(function(){this.stopAutoplay()},this))},createNavigation:function(i){this.slider.find("."+this.classes.sliderNavigation).remove(),this.sliderWrapper.after('<div class="'+this.classes.sliderNavigation+' clearfix"></div>'),this.sliderNavigation=this.slider.find("."+this.classes.sliderNavigation),this.sliderNavigation.addClass("is-"+this.classes.sliderNavigation+"-"+i),"arrows"===i?this.createArrowsNavigation():"dots"===i?this.createDotsNavigation():(this.createArrowsNavigation(),this.createDotsNavigation())},createArrowsNavigation:function(){var i='<button class="'+this.classes.navigationPrev+'"><span class="visuallyhidden '+this.labels.aria+'">'+this.labels.navigationPrev+"</span></button>",t='<button class="'+this.classes.navigationNext+'"><span class="visuallyhidden '+this.labels.aria+'">'+this.labels.navigationNext+"</span></button>";this.sliderNavigation.append('<div class="'+this.classes.navigationArrow+'-wrapper"></div>'),this.sliderNavigation.find("."+this.classes.navigationArrow+"-wrapper").append(i,t),this.navigationPrevious=this.sliderNavigation.find("."+this.classes.navigationPrev),this.navigationNext=this.sliderNavigation.find("."+this.classes.navigationNext),"both"===this.config.navigationType&&(this.navigationPrevious.attr("aria-hidden","true"),this.navigationNext.attr("aria-hidden","true")),this.bindEventsArrowsNavigation()},bindEventsArrowsNavigation:function(){this.navigationPrevious.on("click",i.proxy(function(t){this.navigationTypeTriggered="arrows",this.changeSlide(this.activeSlideIndex-1),this.navigationNext.removeClass(this.classes.states.active),i(t.currentTarget).addClass(this.classes.states.active),this.updateAriabox("La diapositive précédente est affichée."),this.stopAutoplay()},this)),this.navigationNext.on("click",i.proxy(function(t){this.navigationTypeTriggered="arrows",this.changeSlide(this.activeSlideIndex+1),this.navigationPrevious.removeClass(this.classes.states.active),i(t.currentTarget).addClass(this.classes.states.active),this.updateAriabox("La diapositive suivante est affichée."),this.stopAutoplay()},this))},createDotsNavigation:function(){var t='<button class="'+this.classes.navigationDot+'"><span class="visuallyhidden '+this.labels.aria+'"></span></button>';this.sliderNavigation.append('<div class="'+this.classes.navigationDot+'-wrapper"></div>');for(var s=0;s<this.slides.length/this.displayedSlides;s++)this.sliderNavigation.find("."+this.classes.navigationDot+"-wrapper").append(t);this.navigationDots=this.sliderNavigation.find("."+this.classes.navigationDot),this.navigationDots.each(i.proxy(function(t,s){this.config.displayDotsNumber===!0?i(s).find("."+this.labels.aria).text(this.labels.navigationDot).after(t+1):i(s).find("."+this.labels.aria).text(this.labels.navigationDot+(parseInt(t)+1))},this)),this.navigationDots.eq(0).addClass(this.classes.states.active).append('<span class="visuallyhidden '+this.classes.ariaTextActive+'">'+this.labels.navigationDotActive+"</span>"),this.bindEventsDotsNavigation()},bindEventsDotsNavigation:function(){this.navigationDots=this.sliderNavigation.find("."+this.classes.navigationDot),this.navigationDots.on("click",i.proxy(function(t){this.navigationTypeTriggered="dots";var s=i(t.currentTarget).index()-i(t.currentTarget).parent().find(".slider-navigation-prev, .slider-navigation-next").length;this.changeSlide(s*this.displayedSlides),this.navigationDots.removeClass(this.classes.states.active),i(t.currentTarget).addClass(this.classes.states.active),this.stopAutoplay()},this))},swipe:function(){this.detectswipe(this.slider,i.proxy(function(i){this.stopAutoplay(),"left"===i?this.changeSlide(this.activeSlideIndex+1):this.changeSlide(this.activeSlideIndex-1)},this))},autoplay:function(){this.createAutoplayButton(),this.isAutoplay=!0,this.toggleAutoplayText(),this.autoplayInterval=setInterval(i.proxy(function(){this.mouseHover||this.changeSlide(this.activeSlideIndex+1)},this),this.config.autoplayDelay)},createAutoplayButton:function(){var i='<button class="'+this.classes.autoplayButton+" "+this.classes.states.active+'"><span class="">'+this.labels.autoplayButton+"</span></button>";this.sliderNavigation.find("."+this.classes.autoplayButton).length<1&&(this.sliderNavigation.append(i),this.bindEventsAutoplayButton())},bindEventsAutoplayButton:function(){this.autoplayButton=this.sliderNavigation.find("."+this.classes.autoplayButton),this.autoplayButton.on("click",i.proxy(function(){this.isAutoplay?(this.stopAutoplay(),this.autoplayButton.removeClass(this.classes.states.active)):(this.mouseHover=!1,this.autoplay(),this.autoplayButton.addClass(this.classes.states.active))},this))},stopAutoplay:function(){this.isAutoplay=!1,clearInterval(this.autoplayInterval),this.sliderNavigation.find("."+this.classes.autoplayButton).length>0&&(this.sliderNavigation.find("."+this.classes.autoplayButton).removeClass(this.classes.states.active),this.toggleAutoplayText())},toggleAutoplayText:function(){this.sliderNavigation.find("."+this.classes.autoplayButton).length>0&&(this.isAutoplay?this.autoplayButton.find("span").text(this.labels.autoplayButtonPause):this.autoplayButton.find("span").text(this.labels.autoplayButton))},createAriabox:function(){"arrows"===this.config.navigationType&&(this.slider.append('<div class="visuallyhidden '+this.classes.ariaHiddenBox+'" aria-live="polite" aria-atomic="true" aria-hidden="true"></div>'),this.ariaHiddenBox=this.slider.find("."+this.classes.ariaHiddenBox))},updateAriabox:function(i){"arrows"===this.config.navigationType&&this.ariaHiddenBox.html(i)},changeSlide:function(i){0>i?i=this.config.changeSlideLoop?this.slides.length-this.displayedSlides:0:i>this.slides.length-this.displayedSlides&&(i="dots"===this.navigationTypeTriggered?this.slides.length-this.displayedSlides:this.config.changeSlideLoop?0:this.slides.length-this.displayedSlides),this.animated||this.changeSlideAnimation(i)},changeSlideAnimation:function(t){this.animated=!0,this.config.beforeChangeSlide(),this.sliderContainer.animate({left:100/this.displayedSlides*t*-1+"%"},this.config.animationSpeed,i.proxy(function(){if(this.animated=!1,this.config.afterChangeSlide(),this.activeSlideIndex=t,this.slides.find(":focusable").attr("tabindex","-1"),this.slides.slice(t,t+this.displayedSlides).find(":focusable").removeAttr("tabindex"),"dots"===this.config.navigationType||"both"===this.config.navigationType){this.navigationDots.removeClass(this.classes.states.active).eq(t).addClass(this.classes.states.active);var i=this.activeSlideIndex/this.displayedSlides,s=Math.floor(i);i===this.slides.length/this.displayedSlides-1&&(s=this.navigationDots.length-1),this.navigationDots.find("."+this.classes.ariaTextActive).remove(),this.navigationDots.eq(s).append('<span class="visuallyhidden '+this.classes.ariaTextActive+'">'+this.labels.navigationDotActive+"</span>")}},this))},updateActiveSlideContent:function(i){this.config.beforeClone(),this.slider.find("."+this.classes.sliderActiveContent).html(i),this.config.afterClone()},detectswipe:function(i,t){swipe_det=new Object,swipe_det.sX=0,swipe_det.sY=0,swipe_det.eX=0,swipe_det.eY=0;var s=30,e=30,a=50,n=60,o="";i=i[0],i.addEventListener("touchstart",function(i){var t=i.touches[0];swipe_det.sX=t.screenX,swipe_det.sY=t.screenY},!1),i.addEventListener("touchmove",function(i){i.preventDefault();var t=i.touches[0];swipe_det.eX=t.screenX,swipe_det.eY=t.screenY},!1),i.addEventListener("touchend",function(i){(swipe_det.eX-s>swipe_det.sX||swipe_det.eX+s<swipe_det.sX)&&swipe_det.eY<swipe_det.sY+n&&swipe_det.sY>swipe_det.eY-n&&swipe_det.eX>0?o=swipe_det.eX>swipe_det.sX?"right":"left":(swipe_det.eY-a>swipe_det.sY||swipe_det.eY+a<swipe_det.sY)&&swipe_det.eX<swipe_det.sX+e&&swipe_det.sX>swipe_det.eX-e&&swipe_det.eY>0&&(o=swipe_det.eY>swipe_det.sY?"down":"up"),""!=o&&"function"==typeof t&&t(o),o="",swipe_det.sX=0,swipe_det.sY=0,swipe_det.eX=0,swipe_det.eY=0},!1)},isActiveContent:function(){return"undefined"!=typeof this.slider.data("activecontent")}}),i.fn.slider=function(s){return this.each(function(){var e=i(this);if(!e.data("slider")){var a=new t(this,s);e.data("slider",a)}})}}(jQuery);