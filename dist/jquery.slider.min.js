!function(i){var t=function(t,e){this.slider=i(t),this.defaults={displayedSlides:4,slidesGutter:20,createNavigationArrows:!0,createNavigationPages:!0,displayPageNumber:!0,displayFirstActiveContent:!0,swipe:!0,autoplay:!1,autoplayDelay:3e3,infiniteLoop:!0,animationSpeed:300,onActiveSlideUpdateBefore:i.noop,onActiveSlideUpdateAfter:i.noop,onChangeSlideBefore:i.noop,onChangeSlideAfter:i.noop,onLayoutUpdateBefore:i.noop,onLayoutUpdateAfter:i.noop,labels:{navigationPrev:"Précédent",navigationPrevAria:"La diapositive précédente est affichée.",navigationNext:"Suivant",navigationNextAria:"La diapositive suivante est affichée.",navigationPage:"Afficher la diapositive",navigationPageActive:"Diapositive présentement affichée",autoplayButton:"Mettre le carrousel en marche",autoplayButtonPause:"Mettre le carrousel en pause"},classes:{sliderOverflow:"slider-overflow",sliderWrapper:"slider-wrapper",sliderContainer:"slider-container",slide:"slide",sliderActiveContentTrigger:"slider-active-content-trigger",sliderNavigation:"slider-navigation",navigationPrev:"slider-navigation-prev",navigationNext:"slider-navigation-next",navigationArrow:"slider-navigation-arrows",navigationPage:"slider-navigation-pages",ariaText:"aria-text",ariaTextActive:"aria-text-active",ariaHiddenBox:"aria-hidden-box",autoplayButton:"slider-autoplay",states:{active:"is-active"}}},this.classes=i.extend(!0,this.defaults.classes,window.project?window.project.classes:{}),this.labels=i.extend(!0,this.defaults.labels,window.project?window.project.labels:{}),this.config=i.extend(!0,this.defaults,e||{}),this.sliderWrapper=this.slider.find("."+this.classes.sliderWrapper),this.sliderContainer=this.slider.find("."+this.classes.sliderContainer),this.slides=this.slider.find("."+this.classes.slide),this.activeSlideIndex=0,this.mouseHover=!1,this.isAnimated=!1,this.slides.length>this.config.displayedSlides&&((this.config.createNavigationArrows||this.config.createNavigationPages)&&this.createNavigation(),this.config.autoplay&&this.autoplay(),this.config.swipe&&this.swipe()),this.publicMethods={prevSlide:i.proxy(function(){this.changeSlide(this.activeSlideIndex-1)},this),nextSlide:i.proxy(function(){this.changeSlide(this.activeSlideIndex+1)},this),startAutoplay:i.proxy(function(){this.autoplay()},this),stopAutoplay:i.proxy(function(){this.stopAutoplay()},this)},this.init()};i.extend(t.prototype,{init:function(){this.initLayout(this.config.displayedSlides),this.createAriabox(),this.isActiveContent()&&this.initActiveContent(),this.bindEvents()},initLayout:function(){var i=100/this.slides.length,t=this.config.slidesGutter/this.slides.length*this.slides.length;this.config.onLayoutUpdateBefore(),this.sliderWrapper.wrap('<div class="'+this.classes.sliderOverflow+'"></div>'),this.slider.find("."+this.classes.sliderOverflow).css("overflow","hidden"),this.sliderWrapper.css({position:"relative",overflow:"hidden","margin-left":this.config.slidesGutter/2*-1+"px","margin-right":this.config.slidesGutter/2*-1+"px"}),this.sliderContainer.css({position:"relative",left:"0",width:this.slides.length/this.config.displayedSlides*100+"%"}),this.slides.css({"float":"left",position:"relative","margin-left":this.config.slidesGutter/2+"px","margin-right":this.config.slidesGutter/2+"px",width:"calc("+i+"% - "+t+"px)"}),this.slides.slice(this.config.displayedSlides).find("a, button, :input, [tabindex]").attr("tabindex","-1"),this.config.onLayoutUpdateAfter()},bindEvents:function(){this.slider.hover(i.proxy(function(){this.mouseHover=!0},this),i.proxy(function(){this.mouseHover=!1},this)),i(document).on("keyboardnavigation",i.proxy(function(){this.stopAutoplay()},this))},initActiveContent:function(){this.activeContentTriggers=this.slides.find("."+this.classes.sliderActiveContentTrigger),this.activeContentWrapper=i("."+this.slider.data("active-content")),this.activeContentTriggers.on("click",i.proxy(function(t){var e=i(t.currentTarget),s=e.parents("."+this.classes.slide).find("."+e.data("show-active-content")).clone();this.updateActiveSlideContent(s),t.preventDefault()},this)),this.config.displayFirstActiveContent&&this.activeContentTriggers.first().trigger("click")},updateActiveSlideContent:function(i){this.config.onActiveSlideUpdateBefore(),this.activeContentWrapper.html(i),this.config.onActiveSlideUpdateAfter()},createNavigation:function(){this.slider.find("."+this.classes.sliderNavigation).remove(),this.sliderWrapper.after('<div class="'+this.classes.sliderNavigation+' clearfix"></div>'),this.sliderNavigation=this.slider.find("."+this.classes.sliderNavigation),this.config.createNavigationArrows&&this.createNavigationArrows(),this.config.createNavigationPages&&this.createNavigationPages()},createNavigationArrows:function(){var i='<button class="'+this.classes.navigationPrev+'"><span class="visuallyhidden '+this.labels.aria+'">'+this.labels.navigationPrev+"</span></button>",t='<button class="'+this.classes.navigationNext+'"><span class="visuallyhidden '+this.labels.aria+'">'+this.labels.navigationNext+"</span></button>";this.sliderNavigation.append('<div class="'+this.classes.navigationArrow+'-wrapper"></div>'),this.sliderNavigation.find("."+this.classes.navigationArrow+"-wrapper").append(i,t),this.navigationPrevious=this.sliderNavigation.find("."+this.classes.navigationPrev),this.navigationNext=this.sliderNavigation.find("."+this.classes.navigationNext),(this.config.createNavigationArrows||this.config.createNavigationPages)&&(this.navigationPrevious.attr("aria-hidden","true"),this.navigationNext.attr("aria-hidden","true")),this.bindEventsArrowsNavigation()},bindEventsArrowsNavigation:function(){this.navigationPrevious.on("click",i.proxy(function(i){this.navigationTypeTriggered="arrows",this.changeSlide(this.activeSlideIndex-1),this.updateAriabox(this.config.navigationPrevAria),this.stopAutoplay()},this)),this.navigationNext.on("click",i.proxy(function(i){this.navigationTypeTriggered="arrows",this.changeSlide(this.activeSlideIndex+1),this.updateAriabox(this.config.navigationNextAria),this.stopAutoplay()},this))},createNavigationPages:function(){var t='<button class="'+this.classes.navigationPage+'"><span class="visuallyhidden '+this.labels.aria+'"></span></button>';this.sliderNavigation.append('<div class="'+this.classes.navigationPage+'-wrapper"></div>');for(var e=0;e<this.slides.length/this.config.displayedSlides;e++)this.sliderNavigation.find("."+this.classes.navigationPage+"-wrapper").append(t);this.navigationPages=this.sliderNavigation.find("."+this.classes.navigationPage),this.navigationPages.each(i.proxy(function(t,e){this.config.displayPageNumber===!0?i(e).find("."+this.labels.aria).text(this.labels.navigationPage).after(t+1):i(e).find("."+this.labels.aria).text(this.labels.navigationPage+(parseInt(t)+1))},this)),this.navigationPages.eq(0).addClass(this.classes.states.active).append('<span class="visuallyhidden '+this.classes.ariaTextActive+'">'+this.labels.navigationPageActive+"</span>"),this.bindEventsNavigationPages()},bindEventsNavigationPages:function(){this.navigationPages=this.sliderNavigation.find("."+this.classes.navigationPage),this.navigationPages.on("click",i.proxy(function(t){var e=i(t.currentTarget).index();this.navigationTypeTriggered="pages",this.navigationPages.removeClass(this.classes.states.active),i(t.currentTarget).addClass(this.classes.states.active),this.changeSlide(e*this.config.displayedSlides),this.stopAutoplay()},this))},swipe:function(){this.detectswipe(this.slider,i.proxy(function(i){this.stopAutoplay(),this.changeSlide(this.activeSlideIndex+("left"===i?1:-1))},this))},autoplay:function(){this.isAutoplay=!0,this.createAutoplayButton(),this.toggleAutoplayText(),this.autoplayInterval&&clearInterval(this.autoplayInterval),this.autoplayInterval=setInterval(i.proxy(function(){this.mouseHover||this.changeSlide(this.activeSlideIndex+1)},this),this.config.autoplayDelay)},stopAutoplay:function(){this.isAutoplay=!1,clearInterval(this.autoplayInterval),void 0!==this.autoplayButton&&(this.autoplayButton.removeClass(this.classes.states.active),this.toggleAutoplayText())},createAutoplayButton:function(){var i='<button class="'+this.classes.autoplayButton+" "+this.classes.states.active+'"><span class="">'+this.labels.autoplayButton+"</span></button>";this.sliderNavigation.find("."+this.classes.autoplayButton).length<1&&(this.sliderNavigation.append(i),this.bindEventsAutoplayButton())},bindEventsAutoplayButton:function(){this.autoplayButton=this.sliderNavigation.find("."+this.classes.autoplayButton),this.autoplayButton.on("click",i.proxy(function(){this.isAutoplay?this.stopAutoplay():(this.mouseHover=!1,this.autoplay())},this))},toggleAutoplayText:function(){this.sliderNavigation.find("."+this.classes.autoplayButton).length>0&&(this.isAutoplay?this.autoplayButton.find("span").text(this.labels.autoplayButtonPause):this.autoplayButton.find("span").text(this.labels.autoplayButton))},createAriabox:function(){this.config.createNavigationArrows&&(this.slider.append('<div class="visuallyhidden '+this.classes.ariaHiddenBox+'" aria-live="polite" aria-atomic="true" aria-hidden="true"></div>'),this.ariaHiddenBox=this.slider.find("."+this.classes.ariaHiddenBox))},updateAriabox:function(i){this.config.createNavigationArrows&&this.ariaHiddenBox.html(i)},changeSlide:function(i){0>i?i=this.config.infiniteLoop?this.slides.length-this.config.displayedSlides:0:i>this.slides.length-this.config.displayedSlides&&(i="pages"===this.navigationTypeTriggered?this.slides.length-this.config.displayedSlides:this.config.infiniteLoop?0:this.slides.length-this.config.displayedSlides),this.isAnimated||this.changeSlideAnimation(i)},changeSlideAnimation:function(t){var e=this.activeSlideIndex<t?"next":"prev",s="a, button, :input, [tabindex]";this.isAnimated=!0,this.config.onChangeSlideBefore(e),this.sliderContainer.animate({left:100/this.config.displayedSlides*t*-1+"%"},this.config.animationSpeed,i.proxy(function(){this.isAnimated=!1,this.activeSlideIndex=t,this.slides.find(s).attr("tabindex","-1"),this.slides.slice(t,t+this.config.displayedSlides).find(s).removeAttr("tabindex"),(this.config.createNavigationArrows||this.config.createNavigationPages)&&this.updateSlidesNavigation(),this.config.onChangeSlideAfter(e)},this))},updateSlidesNavigation:function(){var i=this.activeSlideIndex/this.config.displayedSlides,t=Math.floor(i);i===this.slides.length/this.config.displayedSlides-1&&(t=this.navigationPages.length-1),this.navigationPages.removeClass(this.classes.states.active).eq(t).addClass(this.classes.states.active),this.navigationPages.find("."+this.classes.ariaTextActive).remove(),this.navigationPages.eq(t).append('<span class="visuallyhidden '+this.classes.ariaTextActive+'">'+this.labels.navigationPageActive+"</span>")},detectswipe:function(i,t){var e=30,s=30,a=50,n=60,o="";swipe_det=new Object,swipe_det.sX=0,swipe_det.sY=0,swipe_det.eX=0,swipe_det.eY=0,i=i[0],i.addEventListener("touchstart",function(i){var t=i.touches[0];swipe_det.sX=t.screenX,swipe_det.sY=t.screenY},!1),i.addEventListener("touchmove",function(i){var t=i.touches[0];swipe_det.eX=t.screenX,swipe_det.eY=t.screenY,i.preventDefault()},!1),i.addEventListener("touchend",function(i){(swipe_det.eX-e>swipe_det.sX||swipe_det.eX+e<swipe_det.sX)&&swipe_det.eY<swipe_det.sY+n&&swipe_det.sY>swipe_det.eY-n&&swipe_det.eX>0?o=swipe_det.eX>swipe_det.sX?"right":"left":(swipe_det.eY-a>swipe_det.sY||swipe_det.eY+a<swipe_det.sY)&&swipe_det.eX<swipe_det.sX+s&&swipe_det.sX>swipe_det.eX-s&&swipe_det.eY>0&&(o=swipe_det.eY>swipe_det.sY?"down":"up"),""!=o&&"function"==typeof t&&t(o),o="",swipe_det.sX=0,swipe_det.sY=0,swipe_det.eX=0,swipe_det.eY=0},!1)},isActiveContent:function(){return void 0!==this.slider.data("active-content")}}),i.fn.slider=function(e){return this.each(i.proxy(function(s,a){var n=i(a);if(!n.data("slider")){var o=new t(a,e);for(var l in o.publicMethods)this[l]=o.publicMethods[l];n.data("slider",o)}},this)),this}}(jQuery);